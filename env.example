# =============================================================================
# AVANTIS COPY TRADING SYSTEM - ENVIRONMENT CONFIGURATION
# Copy this file to .env and fill in your actual values
# =============================================================================

# ===========================================
# REQUIRED CONFIGURATION
# ===========================================

# Telegram Bot Configuration
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here

# Admin User IDs (comma-separated for admin commands)
ADMIN_USER_IDS=123456789,987654321
SUPER_ADMIN_IDS=123456789

# Blockchain Configuration
BASE_RPC_URL=https://mainnet.base.org
BASE_WS_URL=wss://mainnet.base.org
BASE_CHAIN_ID=8453
AVANTIS_TRADING_CONTRACT=0x5FF292d70bA9cD9e7CCb313782811b3D7120535f
# AVANTIS_VAULT_CONTRACT will be resolved at runtime from Trading Proxy
USDC_CONTRACT=0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913

# Avantis Trader SDK Configuration
# Trader signer (choose exactly ONE: local or AWS KMS)
TRADER_PRIVATE_KEY=
AWS_KMS_KEY_ID=
AWS_REGION=

# Price feed (optional â€” Pyth Hermes public to start)
PYTH_WS_URL=wss://hermes.pyth.network/ws
PYTH_HERMES_ENDPOINT=https://hermes.pyth.network/v2/updates/price/latest

# Chainlink Oracle Feeds (Base Network - VERIFIED ADDRESSES)
# Crypto majors
CHAINLINK_BTC_USD_FEED=0x64c911996D3c6aC71f9b455B1E8E7266BcbD848F
CHAINLINK_ETH_USD_FEED=0x71041dddad3595F9CEd3DcCFBe3D1F4b0a16Bb70
CHAINLINK_SOL_USD_FEED=0x975043adBb80fc32276CbF9Bbcfd4A601a12462D

# Coinbase-wrapped assets (often listed)
CHAINLINK_CBBTC_USD_FEED=0x07DA0E54543a844a80ABE69c8A12F22B3aA59f9D
CHAINLINK_CBETH_USD_FEED=0xd7818272B9e248357d13057AAb0B417aF31E817d

# Base-native token with feed
CHAINLINK_AERO_USD_FEED=0x4EC5970fC728C5f65ba413992CD5fF6FD70fcfF0

# FX & commodities (if you enable those markets)
CHAINLINK_EUR_USD_FEED=0xc91D5C4e0C8DC21E9a29Aa03C172421f313b3F0F
CHAINLINK_XAU_USD_FEED=0x5213eBB69743b85644dbB6E25cdF994aFBb8cF31

# Stable/pegged on Base
CHAINLINK_EURC_USD_FEED=0xDAe398520e2B67cd3f27aeF9Cf14D93D927f8250

# Oracle Configuration (optional - uses safe defaults)
ORACLE_MAX_DEVIATION_BPS=50
ORACLE_MAX_AGE_S=30

# Execution Mode Configuration (optional - uses config/feeds.json)
EXEC_MODE_REFRESH_S=5

# Chainlink Sanity Ranges (optional - uses safe defaults)
CHAINLINK_SANITY_BTC_MIN=10000
CHAINLINK_SANITY_BTC_MAX=200000
CHAINLINK_SANITY_ETH_MIN=100
CHAINLINK_SANITY_ETH_MAX=20000
CHAINLINK_SANITY_SOL_MIN=10
CHAINLINK_SANITY_SOL_MAX=1000
CHAINLINK_SANITY_CBBTC_MIN=10000
CHAINLINK_SANITY_CBBTC_MAX=200000
CHAINLINK_SANITY_CBETH_MIN=100
CHAINLINK_SANITY_CBETH_MAX=20000
CHAINLINK_SANITY_AERO_MIN=0.01
CHAINLINK_SANITY_AERO_MAX=100
CHAINLINK_SANITY_EUR_MIN=0.8
CHAINLINK_SANITY_EUR_MAX=1.5
CHAINLINK_SANITY_XAU_MIN=1000
CHAINLINK_SANITY_XAU_MAX=5000
CHAINLINK_SANITY_EURC_MIN=0.8
CHAINLINK_SANITY_EURC_MAX=1.5

# Execution safety
COPY_EXECUTION_MODE=DRY   # DRY or LIVE
DEFAULT_SLIPPAGE_PCT=1

# ===========================================
# PHASE 7: USER ONBOARDING & SETTINGS
# ===========================================

# User Preferences Database (optional)
USER_PREFS_DB=vanta_user_prefs.db

# ===========================================
# PHASE 8-9: COPY-TRADING UX & SCALE
# ===========================================

# Copy-trading reuses USER_PREFS_DB. No new envs required unless you add executor knobs here.

# ===========================================
# PHASE 9: FEATURE FLAGS & MONITORING
# ===========================================

# Feature flags for controlled rollout
COPY_AUTOCOPY_DEFAULT=off          # Default auto-copy setting (off/on)
AUTOCOPY_ALLOWLIST=12345678,98765432  # Comma-separated user IDs allowed for auto-copy

# Optional Redis for notification deduplication (survives restarts)
# REDIS_URL=redis://localhost:6379

# Synthetic signal monitoring (requires ADMIN_USER_IDS to be set)
# FEATURE_SYNTHETIC_SIGNALS=true
# FEATURE_DAILY_DIGEST=true

# Security
ENCRYPTION_KEY=your_32_byte_hex_or_base64_key_here

# ===========================================
# DATABASE & CACHE
# ===========================================

# Database Configuration
DATABASE_URL=sqlite:///vanta_bot.db
# For PostgreSQL: postgresql://user:pass@localhost:5432/vanta_bot

# Redis Cache (optional)
REDIS_URL=redis://localhost:6379

# ===========================================
# LEADERBOARD & TRADING THRESHOLDS
# ===========================================

# Leaderboard Configuration (tune during warmup)
LEADER_ACTIVE_HOURS=72
LEADER_MIN_TRADES_30D=10
LEADER_MIN_VOLUME_30D_USD=100000

# Copy Trading Limits
COPY_MAX_RETRIES=3
COPY_DEFAULT_MAX_SLIPPAGE_BPS=25
COPY_DEFAULT_MAX_LEVERAGE=5
COPY_NOTIONAL_CAP_USD=50000
MAX_COPYTRADERS_PER_USER=5
MAX_FOLLOWS_PER_COPYTRADER=10
MAX_COPY_LEVERAGE=100
MAX_COPY_SLIPPAGE_BPS=200

# Position Limits
MAX_LEVERAGE=500
MIN_POSITION_SIZE=1
MAX_POSITION_SIZE=100000

# Risk Management (Production Hardening)
MAX_POSITION_SIZE_USD=100000
MAX_ACCOUNT_RISK_PCT=0.10
LIQUIDATION_BUFFER_PCT=0.05
MAX_DAILY_LOSS_PCT=0.20

# ===========================================
# INDEXER & PERFORMANCE TUNING
# ===========================================

# Indexer Configuration
INDEXER_BACKFILL_RANGE=50000
INDEXER_PAGE=2000
INDEXER_SLEEP_WS=2
INDEXER_SLEEP_HTTP=5

# Tracker & Leaderboard Performance
TRACKER_INTERVAL_SEC=60
LEADERBOARD_LIMIT=50
POSITION_TRACKER_INTERVAL=60
LEADERBOARD_CACHE_TTL=300
EVENT_INDEXER_BATCH_SIZE=1000

# AI & Analytics
AI_MODEL_UPDATE_INTERVAL=3600

# Rate Limiting
COPY_EXECUTION_RATE_LIMIT=10
TELEGRAM_MESSAGE_RATE_LIMIT=30

# ===========================================
# EXECUTION MODE & SAFETY
# ===========================================

# Copy Execution Mode (DRY|LIVE)
COPY_EXECUTION_MODE=DRY

# Emergency Controls
EMERGENCY_STOP=false
DRY_RUN_MODE=true

# Legacy Emergency Controls (for compatibility)
EMERGENCY_STOP_COPY_TRADING=false
PAUSE_NEW_FOLLOWS=false
MAINTENANCE_MODE=false

# ===========================================
# LOGGING & OBSERVABILITY
# ===========================================

# Environment
ENVIRONMENT=development
DEBUG=false
LOG_LEVEL=INFO
LOG_JSON=false
LOG_FILE=logs/app.log

# Health Monitoring
HEALTH_PORT=8080
ENABLE_METRICS=true

# Execution Mode
DEFAULT_EXECUTION_MODE=DRY

# External Monitoring (optional)
SENTRY_DSN=your_sentry_dsn_here

# ===========================================
# EXTERNAL APIs (OPTIONAL)
# ===========================================

# Price Data APIs
COINGECKO_API_KEY=your_coingecko_api_key
ALPHA_VANTAGE_API_KEY=your_alpha_vantage_api_key

# ===========================================
# RISK EDUCATION (NON-BLOCKING)
# ===========================================

# Risk education features (educate, don't restrict)
RISK_EDUCATION_ENABLED=true
RISK_WARN_LEVERAGE_HIGH=50
RISK_WARN_LEVERAGE_EXTREME=200
RISK_WARN_LIQUIDATION_PCT=0.01
RISK_SCENARIO_STRESS_MOVE=0.02
RISK_PROTOCOL_MAX_LEVERAGE=500

# ===========================================
# EMAIL & NOTIFICATIONS (OPTIONAL)
# ===========================================

# Email Configuration
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password
ADMIN_EMAIL=admin@yourdomain.com

# ===========================================
# PHASE 1: TOOLING & FOUNDATIONS
# ===========================================

# Logging
LOG_JSON=false

# Admins (comma-separated Telegram user IDs)
ADMINS=

# Execution defaults
COPY_EXECUTION_MODE=DRY
DEFAULT_SLIPPAGE_PCT=1

# Feeds (optional)
PYTH_WS_URL=

# Phase 6: Reliability & Observability
LOG_LEVEL=INFO
SENTRY_DSN=
SENTRY_TRACES=0.0
REDIS_URL=
DRAFT_TTL_SEC=1800
